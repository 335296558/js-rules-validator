"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var AsyncValidator=_interopDefault(require("async-validator"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _construct(e,t,r){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,r){var a=[null];a.push.apply(a,t);a=new(Function.bind.apply(e,a));return r&&_setPrototypeOf(a,r.prototype),a}).apply(null,arguments)}var isNativeStringType=function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e},isEmptyValue=function(e,t){return null==e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!isNativeStringType(t)||"string"!=typeof e||e))},fieldValidate=function(e,t,r,a,n,o){if((e.required||!e.required)&&a.hasOwnProperty(e.field))return isEmptyValue(t)&&!e.required?r():t&&o.value&&("function"==typeof o.value&&!o.value(t)||!o.value.test(t))?r(o.message||"%s is required"):void r()},regulars={mixNumLetter:{value:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,}$/,message:"è¯·è¾“å…¥æ•°å­—å­—æ¯æ··åˆä¸”ä¸å°äº 6 ä½å­—ç¬¦"},oneNine:{value:/^([1-9]){1}$/,message:"è¯·è¾“å…¥æ•°å­—1-9ï¼Œä»»æ„ä¸€ä½æ•°å­—"},phone:{value:/^1[34578][0-9]{9}$/,message:"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·"},oneAndNineNine:{value:/^[1-9]{1,2}$/,message:"è¯·è¾“å…¥1-99æ•´æ•°"},numberUppercaseLetter:{value:/^[0-9A-Z]+$/,message:"åªèƒ½æ˜¯æ•°å­—ä¸å¤§å†™å­—æ¯"},twoDecimalPlaces:{value:/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/,message:"åªèƒ½ä¿ç•™2ä½å°æ•°"},cn:{value:/^[u4e00-u9fa5]{0,}$/,message:"è¯·è¾“å…¥ä¸­æ–‡"},AZazNumber:{value:/^[A-Za-z0-9]+$/,message:"è¯·è¾“å…¥è‹±æ–‡å’Œæ•°å­—"},EnglishAlphabet:{value:/^[A-Za-z]+$/,message:"è¯·è¾“å…¥è‹±æ–‡å­—æ¯"},LowerLetters:{value:/^[a-z]+$/,message:"è¯·è¾“å…¥å°å†™å­—æ¯"},uppercaseLetter:{value:/^[A-Z]+$/,message:"è¯·è¾“å…¥å¤§å†™å­—æ¯"},email:{value:/^w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*$/,message:"è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±"},url:{value:/^((https?|ftp|file):\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,message:"è¯·è¾“å…¥æ­£ç¡®çš„åŸŸå"},tel:{value:/^((d{3,4}-)|d{3.4}-)?d{7,8}$/,message:"è¯·è¾“å…¥ç”µè¯å·ç "},ip:{value:/d+.d+.d+.d+/,message:"è¯·è¾“å…¥IPåœ°å€"},s:{value:/s/,message:"ä¸èƒ½ä¸ºç©º"},isDecimalPoint:{value:/^\d+\.\d+$/,message:"è¯·è¾“å…¥å¸¦å°æ•°ç‚¹çš„æ•°å­—"},WeChat:{value:/^[a-zA-Z]([-_a-zA-Z0-9]{5,19})+$/,message:"è¯·è¾“å…¥å¾®ä¿¡å·"},PostalCode:{value:/^(0[1-7]|1[0-356]|2[0-7]|3[0-6]|4[0-7]|5[1-7]|6[1-7]|7[0-5]|8[013-6])\d{4}$/,message:"è¯·è¾“å…¥é‚®æ”¿ç¼–ç "},cnAndNumber:{value:/^(([\u4E00-\u9FA5])|(\d))+$/,message:"åªèƒ½åŒ…å«ä¸­æ–‡å’Œæ•°å­—"},id:{value:/(^\d{15}$)|(^\d{17}([0-9]|X)$)/,message:"è¯·è¾“å…¥èº«ä»½è¯å·ç "},isJSON:{value:function(e){if("string"==typeof e)try{var t=JSON.parse(e);return!(!t||"object"!=_typeof(t))}catch(e){return console.log(e),!1}return!1},message:"è¯·è¾“å…¥æ­£ç¡®çš„JSONæ ¼å¼"}},create=function(e){Object.assign(regulars,e);var t,r={};for(t in regulars)!function(e){var a=regulars[e];r[e]=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];_construct(fieldValidate,t.concat([a]))}}(t);return r},RulesConfig={create:create,regulars:regulars},red="[91m",Blue="[36m%s[0m",jsNvalidator=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;_classCallCheck(this,a),this.debug=Boolean(t),t&&console.log(Blue,"messages ==>>",AsyncValidator.messages),t&&console.log(Blue,"validators ==>>",AsyncValidator.validators);var r=RulesConfig.create,t=RulesConfig.regulars,e=r(e);this.regulars=t,Object.assign(AsyncValidator.validators,e)}return _createClass(a,[{key:"censor",value:function(e,t){var r,a=this;return e&&t?(this.debug&&console.log(t),this.debug&&console.log(e),new AsyncValidator(e).validate(t,function(e,t){return r=e,a.debug&&console.log(e,"===>errors"),!!e&&handleErrors(e,t)}),r):(console.error(red,"censor æ–¹æ³•çš„ éªŒè¯è§„åˆ™ ä¸ éªŒè¯å‚æ•° ä¸èƒ½ä¸ºç©º, censor(éªŒè¯è§„åˆ™, éªŒè¯å‚æ•°)"),!1)}}]),a}();module.exports=jsNvalidator;
