<html>
<title>js-validator</title>
<head>
    <meta data-n-head="1" name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <script src="../lib/js-validator.js"></script>
</head>
<body>
    <script>
        const rules = {
            aa: [
                { required: true, message: '请填写活动形式', trigger: 'blur' },
                { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' },
            ],
            bb: [
                { type:"oneNine2", required: false, trigger: 'change' },
            ],

        };

        const rules2 = {
            desc: [
                { required: true, message: '请填写活动形式', trigger: 'blur' },
                { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' },
            ],
            pass: [
                { 
                    required: true,
                    validator: (rule, value, callback) => {
                        if (!value) {
                            return callback({ message: '密码不能为空' });
                        }
                        callback();
                    }, 
                },
                {
                    validator: (rule, value, callback, a, b) => {
                        if (!/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,}$/.test(value)) {
                            callback({ message: '请输入不小于 6 位的数字 字母混合密码' });
                            return;
                        }
                        callback();
                    },
                },
            ],
        };

        const valid = new validator({
            // 可扩展正则
            oneNine2: {
                value: /(^\d{15}$)|(^\d{17}([0-9]|X)$)/,
                message: '请输入身份证号码22'
            },
        }, true)

        console.log(valid, 'valid')
        const rs = valid.censor(rules,{
            aa:'1234', 
            bb: '1bb234',
        })
        console.log(rs, 'rs')

        const rs2 = valid.censor(rules2,{
            desc:'98676', 
            pass: 'pa',
        })
        console.log(rs2, 'rs2')
    </script>
</body>
</html>
