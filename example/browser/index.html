<html>
<title>js-n-validator</title>
<head>
    <meta data-n-head="1" name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <script src="../../dist/js-n-validator/index.umd.js"></script>
</head>
<body>
    <script>
        const rules = {
            aa: [
                { required: true, message: '请填写活动形式' },
                { min: 3, max: 5, message: '长度在 3 到 5 个字符' },
            ],
            bb: [
                { type:"oneNine2", required: false },
            ],
            cc: [
                {
                    required: true,
                    type: 'isJSON'
                }
            ]
        };

        const rules2 = {
            desc: [
                { required: true, message: '请填写活动形式' },
                { min: 3, max: 5, message: '长度在 3 到 5 个字符' },
            ],
            pass: [
                { 
                    required: true,
                    validator: (rule, value, callback) => {
                        if (!value) {
                            return callback({ message: '密码不能为空' });
                        }
                        callback();
                    }, 
                },
                {
                    validator: (rule, value, callback, a, b) => {
                        if (!/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,}$/.test(value)) {
                            callback({ message: '请输入不小于 6 位的数字 字母混合密码' });
                            return;
                        }
                        callback();
                    },
                },
            ],
        };

        const valid = new jsNvalidator({
            // 可扩展正则
            oneNine2: {
                value: /(^\d{15}$)|(^\d{17}([0-9]|X)$)/,
                message: '请输入身份证号码'
            },
        }, true)

        valid.censor(rules,{
            aa:'1', 
            bb: '45088775564758765411111',
            cc: '{"a":"22"}'
        }).then((rs)=>{
            console.log(`\u001B[32m✓\u001B[39m 参数验证通过`, rs)
        }).catch((err, a)=>{
            console.log('err===>', err)
        })
        
        valid.censor(rules2,{
            desc:'98676', 
            pass: 'pa',
        }).then((rs)=>{
            console.log(`\u001B[32m✓\u001B[39m 参数验证通过 2`, rs)
        }).catch((err)=>{
            console.log('err', err)
        })

        const rs3 = valid.censor(rules2,{
            desc:'233', 
            pass: 'pafds3243',
        }).then((rs)=>{
            console.log(`\u001B[32m✓\u001B[39m 参数验证通过 3`, rs)
        }).catch((err)=>{
            console.log('err', err)
        })

        
    </script>
</body>
</html>
